2025-07-14 10:19:02.695 +05:30 [INF] User profile is available. Using '/Users/presidio/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-14 10:19:02.909 +05:30 [INF] Now listening on: http://localhost:5295
2025-07-14 10:19:02.911 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 10:19:02.911 +05:30 [INF] Hosting environment: Development
2025-07-14 10:19:02.911 +05:30 [INF] Content root path: /Users/presidio/Desktop/genspark-training/Day25_June_6th /ElearnCourseAPI
2025-07-14 10:22:57.206 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/auth/login - null null
2025-07-14 10:22:57.266 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:57.273 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/auth/login - 204 null null 69.728ms
2025-07-14 10:22:57.287 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/v1/auth/login - application/json 53
2025-07-14 10:22:57.292 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:57.313 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-14 10:22:57.405 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/11/2025 5:08:38 PM', Current time (UTC): '7/14/2025 4:52:57 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 10:22:57.413 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/11/2025 5:08:38 PM', Current time (UTC): '7/14/2025 4:52:57 AM'.
2025-07-14 10:22:57.418 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AuthController.Login (ElearnCourseAPI)'
2025-07-14 10:22:57.441 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ElearnAPI.DTOs.LoginDto) on controller ElearnAPI.Controllers.AuthController (ElearnCourseAPI).
2025-07-14 10:22:57.787 +05:30 [INF] Login attempt for user admin@gmail.com
2025-07-14 10:22:58.460 +05:30 [WRN] The property 'Course.Tags' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-07-14 10:22:59.308 +05:30 [INF] Executed DbCommand (74ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Bio", u."CreatedAt", u."Email", u."FullName", u."IsDeleted", u."PasswordHash", u."PhoneNumber", u."ProfilePictureUrl", u."RefreshToken", u."RefreshTokenExpiryTime", u."RoleId", u."UpdatedAt", u."Username", r."Id", r."Name"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-07-14 10:22:59.855 +05:30 [INF] Executed DbCommand (17ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "Bio" = @p0, "CreatedAt" = @p1, "Email" = @p2, "FullName" = @p3, "IsDeleted" = @p4, "PasswordHash" = @p5, "PhoneNumber" = @p6, "ProfilePictureUrl" = @p7, "RefreshToken" = @p8, "RefreshTokenExpiryTime" = @p9, "RoleId" = @p10, "UpdatedAt" = @p11, "Username" = @p12
WHERE "Id" = @p13;
2025-07-14 10:22:59.864 +05:30 [INF] User admin@gmail.com logged in successfully
2025-07-14 10:22:59.869 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 10:22:59.888 +05:30 [INF] Executed action ElearnAPI.Controllers.AuthController.Login (ElearnCourseAPI) in 2442.0712ms
2025-07-14 10:22:59.889 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AuthController.Login (ElearnCourseAPI)'
2025-07-14 10:22:59.900 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/v1/auth/login - 200 null application/json; charset=utf-8 2613.096ms
2025-07-14 10:22:59.904 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null null
2025-07-14 10:22:59.905 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.905 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 204 null null 1.2582ms
2025-07-14 10:22:59.907 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null 0
2025-07-14 10:22:59.908 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.918 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/users - null null
2025-07-14 10:22:59.918 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/courses - null null
2025-07-14 10:22:59.918 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.918 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.919 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/users - 204 null null 0.8554ms
2025-07-14 10:22:59.919 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - null null
2025-07-14 10:22:59.919 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/courses - 204 null null 0.7586ms
2025-07-14 10:22:59.920 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.920 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - 204 null null 0.8401ms
2025-07-14 10:22:59.920 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/admin/courses - null null
2025-07-14 10:22:59.921 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/admin/users - null null
2025-07-14 10:22:59.921 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - null null
2025-07-14 10:22:59.922 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.922 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.922 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.932 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI)'
2025-07-14 10:22:59.932 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI)'
2025-07-14 10:22:59.933 +05:30 [INF] Executing endpoint '/notificationHub/negotiate'
2025-07-14 10:22:59.935 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI)'
2025-07-14 10:22:59.939 +05:30 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers(Int32, Int32) on controller ElearnAPI.Controllers.AdminController (ElearnCourseAPI).
2025-07-14 10:22:59.939 +05:30 [INF] Route matched with {action = "GetAllCourses", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Int32, Int32) on controller ElearnAPI.Controllers.AdminController (ElearnCourseAPI).
2025-07-14 10:22:59.939 +05:30 [INF] Executed endpoint '/notificationHub/negotiate'
2025-07-14 10:22:59.939 +05:30 [INF] Route matched with {action = "GetDailyEnrollmentStats", controller = "Enrollment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDailyEnrollmentStats(Int32) on controller ElearnAPI.Controllers.EnrollmentController (ElearnCourseAPI).
2025-07-14 10:22:59.940 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 200 316 application/json 32.1752ms
2025-07-14 10:22:59.968 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/notificationHub?id=Oih3sq6ijeRvj8RzUz4LPQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW5AZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIwMTk3YzBhYS0yYzNhLTc1NmYtYjQ5Mi0xODE2YmQ5MmM3ZGIiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbiIsImV4cCI6MTc1MjQ3MDU3OSwiaXNzIjoiRWxlYXJuQVBJIiwiYXVkIjoiRWxlYXJuQ2xpZW50In0.4Bexi6t243LB2M2uOawbC7ZBRidSUt-f2xq4jATV3SM - null null
2025-07-14 10:22:59.968 +05:30 [INF] CORS policy execution successful.
2025-07-14 10:22:59.971 +05:30 [INF] Executing endpoint '/notificationHub'
2025-07-14 10:22:59.985 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 10:22:59.985 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 10:22:59.987 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 10:22:59.987 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 10:23:00.010 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Description", c."Domain", c."InstructorId", c."IsDeleted", c."Language", c."Level", c."Price", c."Tags", c."ThumbnailUrl", c."Title", c."UpdatedAt"
FROM "Courses" AS c
LIMIT @__p_1 OFFSET @__p_0
2025-07-14 10:23:00.038 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u0."Id", u0."Bio", u0."CreatedAt", u0."Email", u0."FullName", u0."IsDeleted", u0."PasswordHash", u0."PhoneNumber", u0."ProfilePictureUrl", u0."RefreshToken", u0."RefreshTokenExpiryTime", u0."RoleId", u0."UpdatedAt", u0."Username", r."Id", r."Name"
FROM (
    SELECT u."Id", u."Bio", u."CreatedAt", u."Email", u."FullName", u."IsDeleted", u."PasswordHash", u."PhoneNumber", u."ProfilePictureUrl", u."RefreshToken", u."RefreshTokenExpiryTime", u."RoleId", u."UpdatedAt", u."Username"
    FROM "Users" AS u
    LIMIT @__p_1 OFFSET @__p_0
) AS u0
INNER JOIN "Roles" AS r ON u0."RoleId" = r."Id"
2025-07-14 10:23:00.058 +05:30 [INF] Admin fetched all users
2025-07-14 10:23:00.059 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[ElearnAPI.DTOs.UserDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 10:23:00.073 +05:30 [INF] Admin fetched all courses: Page=1, PageSize=10
2025-07-14 10:23:00.073 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[ElearnAPI.DTOs.CourseDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 10:23:00.076 +05:30 [INF] Executed action ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI) in 137.4799ms
2025-07-14 10:23:00.077 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI)'
2025-07-14 10:23:00.077 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/admin/users - 200 null application/json; charset=utf-8 156.5921ms
2025-07-14 10:23:00.095 +05:30 [INF] Executed action ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI) in 155.9627ms
2025-07-14 10:23:00.095 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI)'
2025-07-14 10:23:00.096 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/admin/courses - 200 null application/json; charset=utf-8 175.4283ms
2025-07-14 10:23:00.097 +05:30 [INF] Executed DbCommand (34ms) [Parameters=[@__sinceDate_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT e0."Key" AS "Date", count(*)::int AS "EnrollmentCount"
FROM (
    SELECT date_trunc('day', e."EnrolledAt", 'UTC') AS "Key"
    FROM "Enrollments" AS e
    WHERE e."EnrolledAt" >= @__sinceDate_0
) AS e0
GROUP BY e0."Key"
ORDER BY e0."Key"
2025-07-14 10:23:00.099 +05:30 [INF] Fetched daily enrollment stats for past 7 days.
2025-07-14 10:23:00.100 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[ElearnAPI.DTOs.EnrollmentStatsDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 10:23:00.106 +05:30 [INF] Executed action ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI) in 166.0377ms
2025-07-14 10:23:00.106 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI)'
2025-07-14 10:23:00.106 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - 200 null application/json; charset=utf-8 185.1995ms
2025-07-14 13:27:05.389 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null null
2025-07-14 13:27:05.400 +05:30 [INF] Connection id "0HNE2I96I3I5V", Request id "0HNE2I96I3I5V:00000001": the application aborted the connection.
2025-07-14 13:27:05.404 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:05.435 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 204 null null 59.2114ms
2025-07-14 13:27:05.437 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null 0
2025-07-14 13:27:05.500 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:05.547 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:05 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 13:27:05.553 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:05 AM'.
2025-07-14 13:27:05.547 +05:30 [INF] Executed endpoint '/notificationHub'
2025-07-14 13:27:05.555 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/notificationHub?id=Oih3sq6ijeRvj8RzUz4LPQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW5AZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIwMTk3YzBhYS0yYzNhLTc1NmYtYjQ5Mi0xODE2YmQ5MmM3ZGIiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbiIsImV4cCI6MTc1MjQ3MDU3OSwiaXNzIjoiRWxlYXJuQVBJIiwiYXVkIjoiRWxlYXJuQ2xpZW50In0.4Bexi6t243LB2M2uOawbC7ZBRidSUt-f2xq4jATV3SM - 101 null null 11045428.9319ms
2025-07-14 13:27:05.566 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-14 13:27:05.591 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-14 13:27:05.592 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 401 0 null 155.327ms
2025-07-14 13:27:06.267 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null null
2025-07-14 13:27:06.268 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.269 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 204 null null 1.8369ms
2025-07-14 13:27:06.270 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null 0
2025-07-14 13:27:06.270 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.271 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 13:27:06.272 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
2025-07-14 13:27:06.272 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-14 13:27:06.273 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-14 13:27:06.273 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 401 0 null 3.0815ms
2025-07-14 13:27:06.289 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/users - null null
2025-07-14 13:27:06.289 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/courses - null null
2025-07-14 13:27:06.289 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.289 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/users - 204 null null 0.9082ms
2025-07-14 13:27:06.290 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/courses - 204 null null 0.7807ms
2025-07-14 13:27:06.291 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - null null
2025-07-14 13:27:06.291 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/admin/courses - null null
2025-07-14 13:27:06.292 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/admin/users - null null
2025-07-14 13:27:06.292 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.292 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.293 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.293 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - 204 null null 1.4759ms
2025-07-14 13:27:06.294 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 13:27:06.294 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 13:27:06.295 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
2025-07-14 13:27:06.296 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - null null
2025-07-14 13:27:06.296 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
2025-07-14 13:27:06.296 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.296 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI)'
2025-07-14 13:27:06.296 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI)'
2025-07-14 13:27:06.297 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 13:27:06.297 +05:30 [INF] Route matched with {action = "GetAllCourses", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Int32, Int32) on controller ElearnAPI.Controllers.AdminController (ElearnCourseAPI).
2025-07-14 13:27:06.298 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
2025-07-14 13:27:06.297 +05:30 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers(Int32, Int32) on controller ElearnAPI.Controllers.AdminController (ElearnCourseAPI).
2025-07-14 13:27:06.298 +05:30 [INF] Authorization failed. These requirements were not met:
RolesAuthorizationRequirement:User.IsInRole must be true for one of the following roles: (Admin|Instructor)
2025-07-14 13:27:06.299 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-14 13:27:06.299 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - 401 0 null 3.2145ms
2025-07-14 13:27:06.333 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/auth/refresh - null null
2025-07-14 13:27:06.333 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.334 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/auth/refresh - 204 null null 0.873ms
2025-07-14 13:27:06.334 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/v1/auth/refresh - application/json 107
2025-07-14 13:27:06.336 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.337 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 13:27:06.338 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 5:22:59 AM', Current time (UTC): '7/14/2025 7:57:06 AM'.
2025-07-14 13:27:06.338 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AuthController.Refresh (ElearnCourseAPI)'
2025-07-14 13:27:06.349 +05:30 [INF] Route matched with {action = "Refresh", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Refresh(ElearnAPI.DTOs.RefreshTokenDto) on controller ElearnAPI.Controllers.AuthController (ElearnCourseAPI).
2025-07-14 13:27:06.361 +05:30 [INF] Refresh token request
2025-07-14 13:27:06.417 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Description", c."Domain", c."InstructorId", c."IsDeleted", c."Language", c."Level", c."Price", c."Tags", c."ThumbnailUrl", c."Title", c."UpdatedAt"
FROM "Courses" AS c
LIMIT @__p_1 OFFSET @__p_0
2025-07-14 13:27:06.418 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u0."Id", u0."Bio", u0."CreatedAt", u0."Email", u0."FullName", u0."IsDeleted", u0."PasswordHash", u0."PhoneNumber", u0."ProfilePictureUrl", u0."RefreshToken", u0."RefreshTokenExpiryTime", u0."RoleId", u0."UpdatedAt", u0."Username", r."Id", r."Name"
FROM (
    SELECT u."Id", u."Bio", u."CreatedAt", u."Email", u."FullName", u."IsDeleted", u."PasswordHash", u."PhoneNumber", u."ProfilePictureUrl", u."RefreshToken", u."RefreshTokenExpiryTime", u."RoleId", u."UpdatedAt", u."Username"
    FROM "Users" AS u
    LIMIT @__p_1 OFFSET @__p_0
) AS u0
INNER JOIN "Roles" AS r ON u0."RoleId" = r."Id"
2025-07-14 13:27:06.422 +05:30 [INF] Admin fetched all users
2025-07-14 13:27:06.422 +05:30 [INF] Admin fetched all courses: Page=1, PageSize=10
2025-07-14 13:27:06.423 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[ElearnAPI.DTOs.UserDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 13:27:06.423 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[ElearnAPI.DTOs.CourseDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 13:27:06.424 +05:30 [INF] Executed action ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI) in 126.2901ms
2025-07-14 13:27:06.425 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI)'
2025-07-14 13:27:06.425 +05:30 [INF] Executed action ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI) in 127.0388ms
2025-07-14 13:27:06.425 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI)'
2025-07-14 13:27:06.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/admin/users - 200 null application/json; charset=utf-8 133.0284ms
2025-07-14 13:27:06.425 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/admin/courses - 200 null application/json; charset=utf-8 134.0315ms
2025-07-14 13:27:06.449 +05:30 [INF] Executed DbCommand (19ms) [Parameters=[@__refreshToken_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Bio", u."CreatedAt", u."Email", u."FullName", u."IsDeleted", u."PasswordHash", u."PhoneNumber", u."ProfilePictureUrl", u."RefreshToken", u."RefreshTokenExpiryTime", u."RoleId", u."UpdatedAt", u."Username", r."Id", r."Name"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."RefreshToken" = @__refreshToken_0 AND u."RefreshTokenExpiryTime" > now() AND NOT (u."IsDeleted")
LIMIT 1
2025-07-14 13:27:06.463 +05:30 [INF] Executed DbCommand (6ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "Bio" = @p0, "CreatedAt" = @p1, "Email" = @p2, "FullName" = @p3, "IsDeleted" = @p4, "PasswordHash" = @p5, "PhoneNumber" = @p6, "ProfilePictureUrl" = @p7, "RefreshToken" = @p8, "RefreshTokenExpiryTime" = @p9, "RoleId" = @p10, "UpdatedAt" = @p11, "Username" = @p12
WHERE "Id" = @p13;
2025-07-14 13:27:06.464 +05:30 [INF] Refresh token generated successfully for user "0197c0aa-2c3a-756f-b492-1816bd92c7db"
2025-07-14 13:27:06.465 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 13:27:06.465 +05:30 [INF] Executed action ElearnAPI.Controllers.AuthController.Refresh (ElearnCourseAPI) in 115.9388ms
2025-07-14 13:27:06.465 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AuthController.Refresh (ElearnCourseAPI)'
2025-07-14 13:27:06.466 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/v1/auth/refresh - 200 null application/json; charset=utf-8 131.3071ms
2025-07-14 13:27:06.478 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - null null
2025-07-14 13:27:06.479 +05:30 [INF] CORS policy execution successful.
2025-07-14 13:27:06.480 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI)'
2025-07-14 13:27:06.480 +05:30 [INF] Route matched with {action = "GetDailyEnrollmentStats", controller = "Enrollment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDailyEnrollmentStats(Int32) on controller ElearnAPI.Controllers.EnrollmentController (ElearnCourseAPI).
2025-07-14 13:27:06.550 +05:30 [INF] Executed DbCommand (65ms) [Parameters=[@__sinceDate_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT e0."Key" AS "Date", count(*)::int AS "EnrollmentCount"
FROM (
    SELECT date_trunc('day', e."EnrolledAt", 'UTC') AS "Key"
    FROM "Enrollments" AS e
    WHERE e."EnrolledAt" >= @__sinceDate_0
) AS e0
GROUP BY e0."Key"
ORDER BY e0."Key"
2025-07-14 13:27:06.550 +05:30 [INF] Fetched daily enrollment stats for past 7 days.
2025-07-14 13:27:06.550 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[ElearnAPI.DTOs.EnrollmentStatsDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 13:27:06.551 +05:30 [INF] Executed action ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI) in 70.2243ms
2025-07-14 13:27:06.551 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI)'
2025-07-14 13:27:06.551 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - 200 null application/json; charset=utf-8 72.7245ms
2025-07-14 14:49:46.123 +05:30 [INF] Application is shutting down...
2025-07-14 14:50:03.198 +05:30 [INF] User profile is available. Using '/Users/presidio/.aspnet/DataProtection-Keys' as key repository; keys will not be encrypted at rest.
2025-07-14 14:50:03.536 +05:30 [INF] Now listening on: http://localhost:5295
2025-07-14 14:50:03.538 +05:30 [INF] Application started. Press Ctrl+C to shut down.
2025-07-14 14:50:03.539 +05:30 [INF] Hosting environment: Development
2025-07-14 14:50:03.539 +05:30 [INF] Content root path: /Users/presidio/Desktop/genspark-training/Day25_June_6th /ElearnCourseAPI
2025-07-14 14:50:10.445 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/auth/login - null null
2025-07-14 14:50:10.500 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:10.506 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/auth/login - 204 null null 62.8249ms
2025-07-14 14:50:10.523 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/api/v1/auth/login - application/json 53
2025-07-14 14:50:10.527 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:10.544 +05:30 [WRN] Failed to determine the https port for redirect.
2025-07-14 14:50:10.588 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AuthController.Login (ElearnCourseAPI)'
2025-07-14 14:50:10.606 +05:30 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(ElearnAPI.DTOs.LoginDto) on controller ElearnAPI.Controllers.AuthController (ElearnCourseAPI).
2025-07-14 14:50:10.920 +05:30 [INF] Login attempt for user admin@gmail.com
2025-07-14 14:50:11.599 +05:30 [WRN] The property 'Course.Tags' is a collection or enumeration type with a value converter but with no value comparer. Set a value comparer to ensure the collection/enumeration elements are compared correctly.
2025-07-14 14:50:12.364 +05:30 [INF] Executed DbCommand (58ms) [Parameters=[@__username_0='?'], CommandType='"Text"', CommandTimeout='30']
SELECT u."Id", u."Bio", u."CreatedAt", u."Email", u."FullName", u."IsDeleted", u."PasswordHash", u."PhoneNumber", u."ProfilePictureUrl", u."RefreshToken", u."RefreshTokenExpiryTime", u."RoleId", u."UpdatedAt", u."Username", r."Id", r."Name"
FROM "Users" AS u
INNER JOIN "Roles" AS r ON u."RoleId" = r."Id"
WHERE u."Username" = @__username_0
LIMIT 1
2025-07-14 14:50:12.921 +05:30 [INF] Executed DbCommand (8ms) [Parameters=[@p13='?' (DbType = Guid), @p0='?', @p1='?' (DbType = DateTime), @p2='?', @p3='?', @p4='?' (DbType = Boolean), @p5='?', @p6='?', @p7='?', @p8='?', @p9='?' (DbType = DateTime), @p10='?' (DbType = Int32), @p11='?' (DbType = DateTime), @p12='?'], CommandType='"Text"', CommandTimeout='30']
UPDATE "Users" SET "Bio" = @p0, "CreatedAt" = @p1, "Email" = @p2, "FullName" = @p3, "IsDeleted" = @p4, "PasswordHash" = @p5, "PhoneNumber" = @p6, "ProfilePictureUrl" = @p7, "RefreshToken" = @p8, "RefreshTokenExpiryTime" = @p9, "RoleId" = @p10, "UpdatedAt" = @p11, "Username" = @p12
WHERE "Id" = @p13;
2025-07-14 14:50:12.930 +05:30 [INF] User admin@gmail.com logged in successfully
2025-07-14 14:50:12.935 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType3`3[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 14:50:12.955 +05:30 [INF] Executed action ElearnAPI.Controllers.AuthController.Login (ElearnCourseAPI) in 2344.1802ms
2025-07-14 14:50:12.955 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AuthController.Login (ElearnCourseAPI)'
2025-07-14 14:50:12.965 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/api/v1/auth/login - 200 null application/json; charset=utf-8 2443.3363ms
2025-07-14 14:50:12.975 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null null
2025-07-14 14:50:12.977 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:12.977 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 204 null null 1.4699ms
2025-07-14 14:50:12.979 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null 0
2025-07-14 14:50:12.980 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:12.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/users - null null
2025-07-14 14:50:12.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/courses - null null
2025-07-14 14:50:12.987 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:12.987 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:12.987 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - null null
2025-07-14 14:50:12.987 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/users - 204 null null 0.8128ms
2025-07-14 14:50:12.988 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/admin/courses - 204 null null 0.54ms
2025-07-14 14:50:12.988 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:12.989 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - 204 null null 1.3085ms
2025-07-14 14:50:12.989 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/admin/courses - null null
2025-07-14 14:50:12.989 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/admin/users - null null
2025-07-14 14:50:12.990 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - null null
2025-07-14 14:50:12.990 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:12.990 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:12.991 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:13.048 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI)'
2025-07-14 14:50:13.048 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI)'
2025-07-14 14:50:13.053 +05:30 [INF] Executing endpoint '/notificationHub/negotiate'
2025-07-14 14:50:13.053 +05:30 [INF] Executing endpoint 'ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI)'
2025-07-14 14:50:13.055 +05:30 [INF] Route matched with {action = "GetAllUsers", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllUsers(Int32, Int32) on controller ElearnAPI.Controllers.AdminController (ElearnCourseAPI).
2025-07-14 14:50:13.055 +05:30 [INF] Route matched with {action = "GetAllCourses", controller = "Admin"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetAllCourses(Int32, Int32) on controller ElearnAPI.Controllers.AdminController (ElearnCourseAPI).
2025-07-14 14:50:13.057 +05:30 [INF] Route matched with {action = "GetDailyEnrollmentStats", controller = "Enrollment"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] GetDailyEnrollmentStats(Int32) on controller ElearnAPI.Controllers.EnrollmentController (ElearnCourseAPI).
2025-07-14 14:50:13.057 +05:30 [INF] Executed endpoint '/notificationHub/negotiate'
2025-07-14 14:50:13.057 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 200 316 application/json 77.8722ms
2025-07-14 14:50:13.062 +05:30 [INF] Request starting HTTP/1.1 GET http://localhost:5295/notificationHub?id=6BDpKMXzjIApe-8k9fegtQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW5AZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIwMTk3YzBhYS0yYzNhLTc1NmYtYjQ5Mi0xODE2YmQ5MmM3ZGIiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbiIsImV4cCI6MTc1MjQ4NjYxMiwiaXNzIjoiRWxlYXJuQVBJIiwiYXVkIjoiRWxlYXJuQ2xpZW50In0.OWl5fwodRpluKZmxxZ8yk_FIe1wJVAVv0IR1uSVgeiE - null null
2025-07-14 14:50:13.063 +05:30 [INF] CORS policy execution successful.
2025-07-14 14:50:13.065 +05:30 [INF] Executing endpoint '/notificationHub'
2025-07-14 14:50:13.092 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 14:50:13.092 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 14:50:13.094 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 14:50:13.094 +05:30 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2025-07-14 14:50:13.107 +05:30 [INF] Executed DbCommand (2ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT c."Id", c."CreatedAt", c."Description", c."Domain", c."InstructorId", c."IsDeleted", c."Language", c."Level", c."Price", c."Tags", c."ThumbnailUrl", c."Title", c."UpdatedAt"
FROM "Courses" AS c
LIMIT @__p_1 OFFSET @__p_0
2025-07-14 14:50:13.125 +05:30 [INF] Executed DbCommand (3ms) [Parameters=[@__p_1='?' (DbType = Int32), @__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT u0."Id", u0."Bio", u0."CreatedAt", u0."Email", u0."FullName", u0."IsDeleted", u0."PasswordHash", u0."PhoneNumber", u0."ProfilePictureUrl", u0."RefreshToken", u0."RefreshTokenExpiryTime", u0."RoleId", u0."UpdatedAt", u0."Username", r."Id", r."Name"
FROM (
    SELECT u."Id", u."Bio", u."CreatedAt", u."Email", u."FullName", u."IsDeleted", u."PasswordHash", u."PhoneNumber", u."ProfilePictureUrl", u."RefreshToken", u."RefreshTokenExpiryTime", u."RoleId", u."UpdatedAt", u."Username"
    FROM "Users" AS u
    LIMIT @__p_1 OFFSET @__p_0
) AS u0
INNER JOIN "Roles" AS r ON u0."RoleId" = r."Id"
2025-07-14 14:50:13.143 +05:30 [INF] Admin fetched all users
2025-07-14 14:50:13.144 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[ElearnAPI.DTOs.UserDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 14:50:13.163 +05:30 [INF] Executed action ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI) in 107.7754ms
2025-07-14 14:50:13.163 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AdminController.GetAllUsers (ElearnCourseAPI)'
2025-07-14 14:50:13.164 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/admin/users - 200 null application/json; charset=utf-8 174.5241ms
2025-07-14 14:50:13.166 +05:30 [INF] Admin fetched all courses: Page=1, PageSize=10
2025-07-14 14:50:13.167 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.IEnumerable`1[[ElearnAPI.DTOs.CourseDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 14:50:13.168 +05:30 [INF] Executed DbCommand (7ms) [Parameters=[@__sinceDate_0='?' (DbType = DateTime)], CommandType='"Text"', CommandTimeout='30']
SELECT e0."Key" AS "Date", count(*)::int AS "EnrollmentCount"
FROM (
    SELECT date_trunc('day', e."EnrolledAt", 'UTC') AS "Key"
    FROM "Enrollments" AS e
    WHERE e."EnrolledAt" >= @__sinceDate_0
) AS e0
GROUP BY e0."Key"
ORDER BY e0."Key"
2025-07-14 14:50:13.170 +05:30 [INF] Fetched daily enrollment stats for past 7 days.
2025-07-14 14:50:13.170 +05:30 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType1`2[[System.Boolean, System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.Collections.Generic.List`1[[ElearnAPI.DTOs.EnrollmentStatsDto, ElearnCourseAPI, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]], System.Private.CoreLib, Version=9.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2025-07-14 14:50:13.188 +05:30 [INF] Executed action ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI) in 130.9461ms
2025-07-14 14:50:13.188 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.EnrollmentController.GetDailyEnrollmentStats (ElearnCourseAPI)'
2025-07-14 14:50:13.189 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/enrollments/analytics/daily-enrollments?days=7 - 200 null application/json; charset=utf-8 198.8425ms
2025-07-14 14:50:13.189 +05:30 [INF] Executed action ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI) in 134.0311ms
2025-07-14 14:50:13.189 +05:30 [INF] Executed endpoint 'ElearnAPI.Controllers.AdminController.GetAllCourses (ElearnCourseAPI)'
2025-07-14 14:50:13.190 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/api/v1/admin/courses - 200 null application/json; charset=utf-8 200.478ms
2025-07-14 17:45:56.798 +05:30 [INF] Request starting HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null null
2025-07-14 17:45:56.844 +05:30 [INF] CORS policy execution successful.
2025-07-14 17:45:56.850 +05:30 [INF] Connection id "0HNE2MUGR3MDJ", Request id "0HNE2MUGR3MDJ:00000001": the application aborted the connection.
2025-07-14 17:45:56.865 +05:30 [INF] Request finished HTTP/1.1 OPTIONS http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 204 null null 69.3964ms
2025-07-14 17:45:56.875 +05:30 [INF] Request starting HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - null 0
2025-07-14 17:45:56.890 +05:30 [INF] CORS policy execution successful.
2025-07-14 17:45:56.913 +05:30 [INF] Executed endpoint '/notificationHub'
2025-07-14 17:45:56.921 +05:30 [INF] Request finished HTTP/1.1 GET http://localhost:5295/notificationHub?id=6BDpKMXzjIApe-8k9fegtQ&access_token=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJodHRwOi8vc2NoZW1hcy54bWxzb2FwLm9yZy93cy8yMDA1LzA1L2lkZW50aXR5L2NsYWltcy9uYW1lIjoiYWRtaW5AZ21haWwuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZWlkZW50aWZpZXIiOiIwMTk3YzBhYS0yYzNhLTc1NmYtYjQ5Mi0xODE2YmQ5MmM3ZGIiLCJodHRwOi8vc2NoZW1hcy5taWNyb3NvZnQuY29tL3dzLzIwMDgvMDYvaWRlbnRpdHkvY2xhaW1zL3JvbGUiOiJBZG1pbiIsImV4cCI6MTc1MjQ4NjYxMiwiaXNzIjoiRWxlYXJuQVBJIiwiYXVkIjoiRWxlYXJuQ2xpZW50In0.OWl5fwodRpluKZmxxZ8yk_FIe1wJVAVv0IR1uSVgeiE - 101 null null 10543686.2427ms
2025-07-14 17:45:56.923 +05:30 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 9:50:12 AM', Current time (UTC): '7/14/2025 12:15:56 PM'.
   at Microsoft.IdentityModel.Tokens.ValidatorUtilities.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2025-07-14 17:45:56.997 +05:30 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '7/14/2025 9:50:12 AM', Current time (UTC): '7/14/2025 12:15:56 PM'.
2025-07-14 17:45:57.001 +05:30 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2025-07-14 17:45:57.014 +05:30 [INF] AuthenticationScheme: Bearer was challenged.
2025-07-14 17:45:57.015 +05:30 [INF] Request finished HTTP/1.1 POST http://localhost:5295/notificationHub/negotiate?negotiateVersion=1 - 499 null null 140.5244ms
